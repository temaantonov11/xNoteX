
## Определение предметной области

**Встраиваемые системы** - это вычислительные устройства, которые выполняют определенные задачи без прямого или постоянного взаимодействия с пользователем. Из-за разнообразия рынков и технологий они имеют разные формы и размеры, но преимущественно эти устройства небольшого размера с ограниченным количеством ресурсов.  

## Встраиваемые Linux-системы

Значительную часть рынка встраиваемых систем занимают устройства, аппаратных ресурсов которых достаточно для запуска разновидностей операционной системы GNU/Linux. 
Типичная аппаратная платформа, на которой может работать система на основе ядра Linux, оснащена *достаточно большим объемом оперативной памяти* (до нескольких гигабайт) и *достаточным объемом энергонезависимой памяти* для хранения всех программных компонентов, предоставляемых в дистрибутиве GNU/Linux. 
Кроме того, чтобы менеджер памяти Linux предоставлял отдельные виртуальные адресные пространства каждому процессу в системе, устройство должно быть оснащено **блоком управления памятью** (*memory management unit, MMU*) - аппаратным компонентом, помогающим операционной системе (ОС) преобразовывать физические адреса в виртуальные, и наоборот, во время выполнения прикладной программы.

В некоторых случаях встраиваемые вычислительные устройства должны выполнять ряд задач в течение *короткого, измеримого и предсказуемого промежутка времени*. Такие устройства представляют собой **системы реального времени** (*real-time system, RTS*) принципиально отличающихся от привычных нам многозадачных систем, таких как настольные компьютеры, серверы и мобильные телефоны.

*Обработка в реальном времени* - это цель, которую очень трудно, если вообще возможно, достичь на встраиваемых платформах Linux. Ядро Linux не предназначено для работы в жестком режиме реального времени, и даже если применяются патчи планировщика ядра, помогающие удовлетворить требования к работе в реальном времени, результаты несопоставимы со специализированными системами.

## Аппаратная архитектура

Архитектура встраиваемой системы сосредоточена вокруг ее **микроконтроллера**, также иногда называемого *блоком микроконтроллера (microcontroller unit, MCU)*. Обычно это одна интегральная схема, содержащая процессор, ОЗУ, флеш-память, последовательные приемники и передатчики и другие базовые компоненты. 

Рынок предлагает множество различных вариантов архитектур микроконтроллеров, поставщиков, ценновых диапазонов, функций и интегрированных ресурсов. 
Обычно стараются разрабатывать недорогие автономные системы с низким потреблением энергии и ресурсов на одной интегральной схеме. 
Поэтому их часто называют **системой на чипе (System-on-chip, SoC)**, или однокристальной схемой.

Практически любой современный микроконтроллер имеет следующий минимальный набор компонентов:
- *микропроцессор*;
- *оперативная память (ОЗУ)*;
- *флеш-память*;
- *последовательные приемопередатчики*.

Кроме того, все больше устройств нуждается во встроенном доступе к сети для связи с другими устройствами и шлюзами. Некоторые микроконтроллеры поддерживают либо хорошо зарекомендовавшие себя стандарты, такие как интерфейсы *Ethernet* или *Wi-Fi*, либо специализированные протоколы, разработанные в соответствии с требованиями к встраиваемым системам, какие как радиоинтерфейсы с частотой до 1ГГц или шина *локальной сети контроллеров (controller area network, CAN)*, и частично или полностью реализованные в рамках интегральной схемы микроконтроллера. 

Все компоненты должны иметь общую шину с процессором, который отвечает за координацию работы периферийной логики. ОЗУ, флеш-память и управляющие регистры приемопередатчиков отображаются в одном и том же физическом адресном пространстве.

![[Pasted image 20250227193836.png]]

Адреса, по которым отображаются ОЗУ и флеш-память, зависят от конкретной модели микроконтроллера и обычно указаны в техническом описании.

Микроконтроллер выполняет код на своем родном машинном языке - последовательности инструкций, переданных в виде двоичного исполняемого файла. Формат команд и файла зависит от архитектуры микроконтроллера.
Исполняемый файл обычно получается в результате компиляции и сборки исходного кода программы с последующим преобразованием выходного файла компилятора в машинный код целевого микропроцессора.

Часть процессора предназначена для выполнения инструкций, которые хранятся в двоичном формате непосредственно в ОЗУ, а также во внутренней флэш-памяти. Обычно выполнение кода начинается с нулевого адреса в памяти или со специального адреса, указанного в техническом описании микроконтроллера.
Микропроцессор быстрее всего извлекает и выполняет код из ОЗУ, но постоянная прошивка хранится во флэш-памяти, емкость которой обычно больше, чем ОЗУ почти у всех микроконтроллеров, и позволяет сохранять данные при выключении питания и перезагрузках.


